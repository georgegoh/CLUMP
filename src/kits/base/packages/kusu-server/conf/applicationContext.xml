<?xml version="1.0" encoding="UTF-8"?>
<objects xmlns="http://www.springframework.org/springpython/schema/objects"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/springpython/schema/objects
       		http://springpython.webfactional.com/schema/context/spring-python-context-1.0.xsd">
       		
	
	<object id="icePropertySetter" class="kusu.server.IcePropertySetter">
		<constructor-arg>
			<ref object="IceProperties"/>
		</constructor-arg>
		<constructor-arg>
			<dict>
				<entry>
				<key><value>Ice.Plugin.IceSSL</value></key><value>IceSSL:createIceSSL</value>
				</entry>
				<entry>
                    <key><value>IceSSL.DefaultDir</value></key><value>/opt/kusu/server/certs</value>
				</entry>
				<entry>
				<key><value>IceSSL.CertFile</value></key><value>server_cert.pem</value>
				</entry>
				<entry>
				<key><value>IceSSL.KeyFile</value></key><value>server_key.pem</value>
				</entry>
				<entry>
				<key><value>IceSSL.CertAuthFile</value></key><value>cacert.pem</value>
				</entry>
				
				<entry>
				<key><value>IceSSL.Password</value></key><value>system</value>
				</entry>
				
			</dict>
		</constructor-arg>
	</object>
	
	<object id="kusuServerAdapterProxy" class="kusu.server.adapter.KusuServerAdapterProxy">
		<constructor-arg>
			<ref object="IceProperties"/>
		</constructor-arg>
		<property name="protocol" >
			<value>ssl</value>
		</property>
		<property name="port">
			<value>10000</value>
		</property> 
	</object>	

    <object id="networkService" class="kusu.service.network.NetworkService"/>
    
	<object id="networkServant" class="kusu.server.network.NetworkServant">
		<property name="networkSvc">
			<ref object="networkService"/>
		</property>
	</object>

    <object id="installService" class="kusu.service.install.InstallService"/>
    <object id="installServant" class="kusu.server.install.InstallServant">
        <property name="installSvc">
            <ref object="installService"/>
        </property>
        <property name="cleanFiles">
            <value>False</value>
        </property>
    </object>

</objects>
